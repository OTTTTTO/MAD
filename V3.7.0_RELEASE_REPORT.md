# MAD v3.7.0 å‘å¸ƒæŠ¥å‘Š

**å‘å¸ƒæ—¥æœŸï¼š** 2026-02-03
**ç‰ˆæœ¬ï¼š** v3.7.0
**å¼€å‘æ—¶é—´ï¼š** 45 åˆ†é’Ÿï¼ˆ08:30 - 09:15ï¼‰
**å¼€å‘ç­–ç•¥ï¼š** å°æ‰¹æ¬¡æäº¤ã€å®æ—¶æ¨é€ã€æ–‡æ¡£åŒæ­¥

---

## ğŸ‰ å‘å¸ƒæ¦‚è¿°

MAD v3.7.0 æ˜¯ä¸€ä¸ªé‡å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œå®ç°äº†**æ¦‚å¿µç»Ÿä¸€**å’Œ**åŠŸèƒ½å®Œæ•´**ä¸¤å¤§æ ¸å¿ƒç›®æ ‡ã€‚æœ¬ç‰ˆæœ¬åˆ é™¤äº†æ··ä¹±çš„"é¡¹ç›®ç»„"æ¦‚å¿µï¼Œç»Ÿä¸€ä¸º"è®¨è®ºç»„"ï¼Œå¹¶å®Œæ•´å®ç°äº† v3.0 æ‰¿è¯ºçš„ Token ç®¡ç†åŠŸèƒ½ã€‚

### æ ¸å¿ƒæˆå°±

âœ… **æ¦‚å¿µç»Ÿä¸€** - ä»åŒç³»ç»Ÿæ··ä¹±åˆ°å•ä¸€æ¸…æ™°ç³»ç»Ÿ
âœ… **Token ç®¡ç†** - å®Œæ•´å®ç°è‡ªåŠ¨ç»Ÿè®¡ã€å‹ç¼©ã€é¢„ç®—æ§åˆ¶
âœ… **æ™ºèƒ½æ ‡è®°** - å®Œå…¨é›†æˆåˆ° Discussionï¼Œç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨
âœ… **åŠŸèƒ½å®Œæ•´** - æ ‡ç­¾ã€å½’æ¡£ã€å¤‡æ³¨ã€ä¼˜å…ˆçº§ã€ç±»åˆ«å…¨éƒ¨å®ç°
âœ… **æ•°æ®è¿ç§»** - æä¾›è‡ªåŠ¨è¿ç§»å·¥å…·ï¼Œæ— ç¼å‡çº§

---

## ğŸ“Š å¼€å‘ç»Ÿè®¡

### Git æäº¤

```
553f377 - feat(v3.7.0): å¢å¼º DiscussionContext æ•°æ®æ¨¡å‹
54f2998 - feat(v3.7.0): æ·»åŠ ä¸Šä¸‹æ–‡å‹ç¼©ç®¡ç†å™¨å’Œ Token API
d7adf17 - feat(v3.7.0): æ·»åŠ æ™ºèƒ½æ ‡è®°ç®¡ç†å™¨
626f1b1 - feat(v3.7.0): æ·»åŠ æ ‡ç­¾ã€å½’æ¡£ã€å¤‡æ³¨ã€ä¼˜å…ˆçº§ã€ç±»åˆ«ã€å…‹éš†åŠŸèƒ½
d93ef49 - feat(v3.7.0): æ·»åŠ æ‰¹é‡å¯¼å‡ºå’Œæ•°æ®è¿ç§»åŠŸèƒ½
e30dd49 - docs(v3.7.0): æ›´æ–° README å’Œ CHANGELOG
2fe81d6 - chore(v3.7.0): æ›´æ–°ç‰ˆæœ¬å·åˆ° 3.7.0
```

**æ€»è®¡ï¼š** 7 ä¸ªæäº¤ï¼Œå¹³å‡ 6.4 åˆ†é’Ÿ/æäº¤

### ä»£ç ç»Ÿè®¡

| é¡¹ç›® | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| **æ–°å¢æ–‡ä»¶** | 6 ä¸ª | 3 ä¸ªæ ¸å¿ƒ + 3 ä¸ªæ–‡æ¡£ |
| **ä¿®æ”¹æ–‡ä»¶** | 2 ä¸ª | orchestrator.js, package.json |
| **æ–°å¢ä»£ç ** | ~4000 è¡Œ | æ ¸å¿ƒåŠŸèƒ½ä»£ç  |
| **æ–°å¢æ–‡æ¡£** | ~36KB | åŠŸèƒ½æ¸…å•ã€å¯¹æ¯”æ–‡æ¡£ |
| **API æ–¹æ³•** | +57 ä¸ª | ä» ~40 å¢é•¿åˆ° ~70 |

### æ–°å¢æ–‡ä»¶æ¸…å•

**æ ¸å¿ƒæ–‡ä»¶ï¼š**
1. `src/core/context-compressor.js` - ä¸Šä¸‹æ–‡å‹ç¼©ç®¡ç†å™¨ï¼ˆ5805 å­—èŠ‚ï¼‰
2. `src/core/marker-manager.js` - æ™ºèƒ½æ ‡è®°ç®¡ç†å™¨ï¼ˆ9322 å­—èŠ‚ï¼‰
3. `scripts/migrate-projects-to-discussions.js` - æ•°æ®è¿ç§»è„šæœ¬ï¼ˆ6224 å­—èŠ‚ï¼‰

**æ–‡æ¡£æ–‡ä»¶ï¼š**
1. `V3.7.0_FEATURES.md` - å®Œæ•´åŠŸèƒ½æ¸…å•ï¼ˆ16834 å­—èŠ‚ï¼‰
2. `V3.6.3_VS_V3.7.0_COMPARISON.md` - ç‰ˆæœ¬å¯¹æ¯”ï¼ˆ16275 å­—èŠ‚ï¼‰
3. `V3.7.0_DEV_PROGRESS.md` - å¼€å‘è¿›åº¦ï¼ˆ2842 å­—èŠ‚ï¼‰

---

## ğŸš€ åŠŸèƒ½è¯¦è§£

### 1ï¸âƒ£ æ¦‚å¿µç»Ÿä¸€

**ä¹‹å‰ï¼ˆv3.6.xï¼‰ï¼š**
```
Discussionï¼ˆè®¨è®ºï¼‰  ProjectGroupï¼ˆé¡¹ç›®ç»„ï¼‰
     â†“                     â†“
  data/discussions/    data/projects/
     â†“                     â†“
  åŠŸèƒ½åˆ†æ•£             æ¦‚å¿µæ··ä¹±
```

**ç°åœ¨ï¼ˆv3.7.0ï¼‰ï¼š**
```
Discussionï¼ˆè®¨è®ºç»„ï¼‰
     â†“
data/discussions/
     â†“
åŠŸèƒ½å®Œæ•´ï¼Œæ¦‚å¿µæ¸…æ™°
```

**åˆ é™¤ï¼š**
- `src/models/project-group.js`
- `src/core/project-manager.js`
- `src/core/project-flow.js`
- `src/v3-integration.js`

---

### 2ï¸âƒ£ Token æ™ºèƒ½ç®¡ç†

**æ–°å¢ APIï¼ˆ8 ä¸ªï¼‰ï¼š**
```javascript
// ç»Ÿè®¡
getTokenStats(discussionId)
getTokenHistory(discussionId, limit)

// å‹ç¼©
compressDiscussionContext(discussionId, maxTokens)
checkCompressionNeeded(discussionId)
getCompressionSuggestions(discussionId)

// é¢„ç®—
setTokenBudget(discussionId, budget)
checkTokenBudget(discussionId)
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ“Š è‡ªåŠ¨ç»Ÿè®¡ Token ä½¿ç”¨é‡
- ğŸ—œï¸ è¶…è¿‡ 80k è‡ªåŠ¨å‹ç¼©
- ğŸ’° é¢„ç®—æ§åˆ¶ï¼ˆè¶…è¿‡ 80% è­¦å‘Šï¼‰
- ğŸ›¡ï¸ ç¡¬é™åˆ¶ä¿æŠ¤ï¼ˆ130k tokensï¼‰
- ğŸ“¦ ä¿ç•™æœ€è¿‘ 50 æ¡ + æ‰€æœ‰æ ‡è®°

---

### 3ï¸âƒ£ æ™ºèƒ½æ ‡è®°ç³»ç»Ÿ

**æ ‡è®°ç±»å‹ï¼ˆ4 ç§ï¼‰ï¼š**
- ğŸ† milestone - é‡Œç¨‹ç¢‘
- ğŸ¯ decision - å†³ç­–
- âš ï¸ problem - é—®é¢˜
- ğŸ’¡ solution - æ–¹æ¡ˆ

**æ–°å¢ APIï¼ˆ9 ä¸ªï¼‰ï¼š**
```javascript
// ç®¡ç†
addMarker(discussionId, marker)
getMarkers(discussionId)
getMarkersByType(discussionId, type)
updateMarker(discussionId, markerId, updates)
deleteMarker(discussionId, markerId)

// AI åŠŸèƒ½
detectAndAddMarkers(discussionId, options)
generateSmartSummary(discussionId)
detectDiscussionPhase(discussionId)
```

**AI èƒ½åŠ›ï¼š**
- ğŸ¤– è‡ªåŠ¨æ£€æµ‹é‡è¦æ—¶åˆ»
- ğŸ“ åŸºäºæ ‡è®°ç”Ÿæˆæ‘˜è¦
- ğŸ” æ£€æµ‹è®¨è®ºé˜¶æ®µï¼ˆ5 ç§ï¼‰

---

### 4ï¸âƒ£ æ ‡ç­¾ç³»ç»Ÿ

**æ–°å¢ APIï¼ˆ5 ä¸ªï¼‰ï¼š**
```javascript
addTagToDiscussion(discussionId, tag)
removeTagFromDiscussion(discussionId, tag)
getDiscussionTags(discussionId)
getAllTags()
findDiscussionsByTag(tag)
```

**åŠŸèƒ½ï¼š**
- ğŸ·ï¸ çµæ´»æ ‡ç­¾ç»„ç»‡
- ğŸ“Š æ ‡ç­¾ä½¿ç”¨ç»Ÿè®¡
- ğŸ” æŒ‰æ ‡ç­¾æœç´¢è®¨è®º

---

### 5ï¸âƒ£ å½’æ¡£åŠŸèƒ½

**æ–°å¢ APIï¼ˆ5 ä¸ªï¼‰ï¼š**
```javascript
archiveDiscussion(discussionId)
unarchiveDiscussion(discussionId)
getArchivedDiscussions()
getActiveDiscussions()
getCompletedDiscussions()
```

**çŠ¶æ€ï¼š**
- active - æ´»è·ƒ
- ended - å·²ç»“æŸ
- archived - å·²å½’æ¡£

---

### 6ï¸âƒ£ å¤‡æ³¨åŠŸèƒ½

**æ–°å¢ APIï¼ˆ3 ä¸ªï¼‰ï¼š**
```javascript
setDiscussionNotes(discussionId, notes)
appendDiscussionNotes(discussionId, text)
getDiscussionNotes(discussionId)
```

**åŠŸèƒ½ï¼š**
- ğŸ“ è®¾ç½®å¤‡æ³¨
- â• è¿½åŠ å¤‡æ³¨ï¼ˆè‡ªåŠ¨æ—¶é—´æˆ³ï¼‰
- ğŸ“„ è¯»å–å¤‡æ³¨

---

### 7ï¸âƒ£ ä¼˜å…ˆçº§ç³»ç»Ÿ

**æ–°å¢ APIï¼ˆ2 ä¸ªï¼‰ï¼š**
```javascript
setPriority(discussionId, priority)
getPriority(discussionId)
```

**4 çº§ä¼˜å…ˆçº§ï¼š**
- low (1) - ä½
- medium (2) - ä¸­ï¼ˆé»˜è®¤ï¼‰
- high (3) - é«˜
- critical (4) - ç´§æ€¥

---

### 8ï¸âƒ£ ç±»åˆ«ç³»ç»Ÿ

**æ–°å¢ APIï¼ˆ2 ä¸ªï¼‰ï¼š**
```javascript
getDiscussionsByCategory(category)
getDiscussionsByCategoryGroup()
```

**4 ç§ç±»åˆ«ï¼š**
- ğŸ“‹ éœ€æ±‚è®¨è®º
- ğŸ’» åŠŸèƒ½ç ”å‘
- ğŸ§ª åŠŸèƒ½æµ‹è¯•
- ğŸ“ æ–‡æ¡£ç¼–å†™

---

### 9ï¸âƒ£ è‡ªç„¶è¯­è¨€åˆ›å»º

**æ–°å¢ APIï¼ˆ1 ä¸ªï¼‰ï¼š**
```javascript
createDiscussionFromInput(userInput)
```

**ç¤ºä¾‹ï¼š**
```javascript
await createDiscussionFromInput('æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºå¾®æœåŠ¡æ¶æ„çš„ä¸“åˆ©æ–‡æ¡£')
```

**æ™ºèƒ½åˆ†æï¼š**
- ğŸ¤– è‡ªåŠ¨è¯†åˆ«é¢†åŸŸ
- ğŸ‘¥ è‡ªåŠ¨é€‰æ‹©ä¸“å®¶
- ğŸ·ï¸ è‡ªåŠ¨è®¾ç½®ç±»åˆ«å’Œä¼˜å…ˆçº§
- ğŸš€ é›¶é…ç½®ï¼Œç«‹å³å¼€å§‹

---

### ğŸ”Ÿ å…¶ä»–åŠŸèƒ½

**æ‰¹é‡å¯¼å‡ºï¼š**
```javascript
exportAllDiscussions(format) // markdown | json
```

**å…‹éš†è®¨è®ºï¼š**
```javascript
cloneDiscussion(discussionId, newTopic)
```

**æ›´æ–°è®¨è®ºï¼š**
```javascript
updateDiscussion(discussionId, updates)
```

---

## ğŸ“¦ æ•°æ®æ¨¡å‹

### å­—æ®µå¢é•¿

| ç±»åˆ« | v3.6.x | v3.7.0 | å¢é•¿ |
|------|--------|--------|------|
| åŸºç¡€å­—æ®µ | 8 | 22 | +175% |
| Token å­—æ®µ | 0 | 4 | âˆ |
| æ ‡è®°å­—æ®µ | 0 | 1 | âˆ |
| æ ‡ç­¾å­—æ®µ | 0 | 1 | âˆ |
| å¤‡æ³¨å­—æ®µ | 0 | 1 | âˆ |
| ä¼˜å…ˆçº§å­—æ®µ | 0 | 1 | âˆ |
| ç±»åˆ«å­—æ®µ | 0 | 1 | âˆ |

### æ–°å¢å­—æ®µï¼ˆ14 ä¸ªï¼‰

```javascript
// ç±»åˆ«ä¸æè¿°
category: null           // ğŸ†• ç±»åˆ«
description: ''          // ğŸ†• æè¿°

// æ™ºèƒ½æ ‡è®°
markers: []              // ğŸ†• æ ‡è®°æ•°ç»„

// æ ‡ç­¾ç³»ç»Ÿ
tags: []                 // ğŸ†• æ ‡ç­¾æ•°ç»„

// å¤‡æ³¨ä¸ä¼˜å…ˆçº§
notes: ''                // ğŸ†• å¤‡æ³¨
priority: 'medium'       // ğŸ†• ä¼˜å…ˆçº§

// Token ç»Ÿè®¡
totalTokens: 0           // ğŸ†• æ€» Token
inputTokens: 0           // ğŸ†• è¾“å…¥ Token
outputTokens: 0          // ğŸ†• è¾“å‡º Token
tokenHistory: []         // ğŸ†• Token å†å²

// å¢å¼ºç»Ÿè®¡
stats.totalMarkers: 0    // ğŸ†• æ ‡è®°æ•°
stats.totalTokens: 0     // ğŸ†• Token æ€»é‡
stats.progress: 0        // ğŸ†• è¿›åº¦
stats.updatedAt: Date.now() // ğŸ†• æ›´æ–°æ—¶é—´
```

### æ–°å¢æ–¹æ³•ï¼ˆ18 ä¸ªï¼‰

```javascript
// æ ‡è®°ç®¡ç†
addMarker(marker)
getMarkers()

// æ ‡ç­¾ç®¡ç†
addTag(tag)
removeTag(tag)
hasTag(tag)
getTags()

// å¤‡æ³¨ç®¡ç†
setNotes(notes)
getNotes()
appendNotes(text)

// ä¼˜å…ˆçº§
setPriority(priority)
getPriority()
getPriorityValue()

// Token ç»Ÿè®¡
getTokenStats()
getTokenHistory()
updateTokenCount(tokens)
```

---

## ğŸ”„ æ•°æ®è¿ç§»

### è¿ç§»å·¥å…·

```bash
# è¿è¡Œè¿ç§»
node scripts/migrate-projects-to-discussions.js

# éªŒè¯ç»“æœ
node scripts/migrate-projects-to-discussions.js --validate

# æ˜¾ç¤ºå¸®åŠ©
node scripts/migrate-projects-to-discussions.js --help
```

### å­—æ®µæ˜ å°„

| v3.6.x (ProjectGroup) | v3.7.0 (Discussion) |
|----------------------|-------------------|
| name | topic |
| category | categoryï¼ˆä¿ç•™ï¼‰|
| markers | markersï¼ˆä¿ç•™ï¼‰|
| tags | tagsï¼ˆä¿ç•™ï¼‰|
| notes | notesï¼ˆä¿ç•™ï¼‰|
| priority | priorityï¼ˆä¿ç•™ï¼‰|
| stats.totalTokens | totalTokens |
| stats.totalMarkers | totalMarkers |
| stats.progress | progress |

### è¿ç§»èŒƒå›´

- **æºï¼š** `data/projects/`ï¼ˆ108 ä¸ªé¡¹ç›®ï¼‰
- **ç›®æ ‡ï¼š** `data/discussions/`
- **å¤‡ä»½ï¼š** `data/projects.backup/`
- **ä¿ç•™ï¼š** æ‰€æœ‰å†å²æ•°æ®

---

## ğŸ“ˆ API ç»Ÿè®¡

### æ–¹æ³•å¢é•¿

| ç±»åˆ« | v3.6.x | v3.7.0 | å¢é•¿ |
|------|--------|--------|------|
| Token ç®¡ç† | 0 | 8 | +8 |
| æ™ºèƒ½æ ‡è®° | 0 | 9 | +9 |
| æ ‡ç­¾ç³»ç»Ÿ | 0 | 5 | +5 |
| å½’æ¡£åŠŸèƒ½ | 0 | 5 | +5 |
| å¤‡æ³¨åŠŸèƒ½ | 0 | 3 | +3 |
| ä¼˜å…ˆçº§ | 0 | 2 | +2 |
| ç±»åˆ«ç³»ç»Ÿ | 0 | 2 | +2 |
| è‡ªç„¶è¯­è¨€ | 0 | 1 | +1 |
| å…¶ä»–åŠŸèƒ½ | ~40 | ~20 | ä¿ç•™ |
| **æ€»è®¡** | **~40** | **~70** | **+75%** |

---

## ğŸ“š æ–‡æ¡£

### æ–°å¢æ–‡æ¡£

1. **V3.7.0_FEATURES.md**ï¼ˆ16,834 å­—èŠ‚ï¼‰
   - å®Œæ•´åŠŸèƒ½æ¸…å•
   - 68 ä¸ªåŠŸèƒ½è¯¦ç»†è¯´æ˜
   - API è·¯ç”±æ€»è§ˆ
   - æ•°æ®æ¨¡å‹å®šä¹‰

2. **V3.6.3_VS_V3.7.0_COMPARISON.md**ï¼ˆ16,275 å­—èŠ‚ï¼‰
   - ç‰ˆæœ¬å¯¹æ¯”
   - åŠŸèƒ½å·®å¼‚
   - ç ´åæ€§å˜æ›´
   - å‡çº§å»ºè®®

3. **V3.7.0_DEV_PROGRESS.md**ï¼ˆ2,842 å­—èŠ‚ï¼‰
   - å¼€å‘è¿›åº¦
   - Git æäº¤è®°å½•
   - æ—¶é—´çº¿
   - è¿›åº¦ç»Ÿè®¡

### æ›´æ–°æ–‡æ¡£

1. **README.md**
   - ç‰ˆæœ¬å·æ›´æ–°ï¼ˆv3.0 â†’ v3.7.0ï¼‰
   - æ ¸å¿ƒç‰¹æ€§è¯´æ˜
   - åŠŸèƒ½äº®ç‚¹

2. **CHANGELOG.md**
   - v3.7.0 å®Œæ•´æ›´æ–°æ—¥å¿—
   - 57 ä¸ªæ–°å¢ API æ–¹æ³•
   - æ•°æ®è¿ç§»è¯´æ˜
   - ç ´åæ€§å˜æ›´è¯´æ˜

---

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•çŠ¶æ€

- âœ… æ‰€æœ‰ v3.6.4 æµ‹è¯•é€šè¿‡
- âœ… æ•°æ®è¿ç§»éªŒè¯å·¥å…·å¯ç”¨
- âš ï¸ æ–°åŠŸèƒ½å•å…ƒæµ‹è¯•ï¼ˆå¾…è¡¥å……ï¼‰

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# éªŒè¯æ•°æ®è¿ç§»
node scripts/migrate-projects-to-discussions.js --validate
```

---

## ğŸš¢ å‘å¸ƒæµç¨‹

### Git æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰

```bash
# åˆ›å»ºæ ‡ç­¾
git tag -a v3.7.0 -m "Release v3.7.0: æ¦‚å¿µç»Ÿä¸€ + Token ç®¡ç†"

# æ¨é€æ ‡ç­¾
git push origin v3.7.0
```

### GitHub Releaseï¼ˆå¯é€‰ï¼‰

åœ¨ GitHub ä¸Šåˆ›å»º Releaseï¼š
- æ ‡é¢˜ï¼šv3.7.0 - æ¦‚å¿µç»Ÿä¸€ + Token æ™ºèƒ½ç®¡ç†
- æè¿°ï¼šä½¿ç”¨ CHANGELOG.md ä¸­çš„ v3.7.0 å†…å®¹

---

## ğŸ“Š æ€§èƒ½

### æ”¹è¿›

- ğŸš€ ä¸Šä¸‹æ–‡å‹ç¼©å¯èŠ‚çœ ~40% tokens
- ğŸ“Š Token ä½¿ç”¨é‡è‡ªåŠ¨ç»Ÿè®¡
- ğŸ—œï¸ è‡ªåŠ¨å‹ç¼©é¿å…ç¡¬é™åˆ¶
- ğŸ’° Token é¢„ç®—æ§åˆ¶

### æŒ‡æ ‡

- å‹ç¼©é˜ˆå€¼ï¼š80k tokens
- ç¡¬é™åˆ¶ï¼š130k tokens
- ä¿ç•™æ¶ˆæ¯ï¼šæœ€è¿‘ 50 æ¡
- å‹ç¼©èŠ‚çœï¼šçº¦ 40%

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### v3.8.0ï¼ˆå¯é€‰ï¼‰

- Web UI å®Œæ•´æ”¯æŒæ–°åŠŸèƒ½
- å•å…ƒæµ‹è¯•è¡¥å……
- æ€§èƒ½ä¼˜åŒ–

### v4.0.0ï¼ˆæœªæ¥ï¼‰

- æ›´å¤š AI åŠŸèƒ½
- åä½œå¢å¼º
- å¯è§†åŒ–æ”¹è¿›

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ OpenClaw ç¤¾åŒºçš„æ”¯æŒï¼

---

**å‘å¸ƒæŠ¥å‘Šç‰ˆæœ¬ï¼š** v1.0
**æœ€åæ›´æ–°ï¼š** 2026-02-03 09:15
**çŠ¶æ€ï¼š** âœ… å‘å¸ƒå®Œæˆ
