# Multi-Agent Discussion Skill

è®©å¤šä¸ªä¸“ä¸š Agent åœ¨è™šæ‹Ÿè®¨è®ºç»„ä¸­ååŒå·¥ä½œï¼Œé€šè¿‡äº’ç›¸äº¤æµã€ç¢°æ’è§‚ç‚¹ï¼Œäº§ç”Ÿæ›´å…¨é¢çš„è§£å†³æ–¹æ¡ˆã€‚

## åŠŸèƒ½ç‰¹æ€§

âœ… **è™šæ‹Ÿè®¨è®ºç»„** - åˆ›å»ºå¤š Agent åä½œçš„è®¨è®ºç©ºé—´
âœ… **åŠ¨æ€å‘è¨€** - Agent æ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½åˆ¤æ–­ä½•æ—¶å‘è¨€
âœ… **äº’ç›¸ @** - Agent ä¹‹é—´å¯ä»¥äº’ç›¸æé—®ã€å›åº”
âœ… **å†²çªæ£€æµ‹** - è‡ªåŠ¨è¯†åˆ«æ„è§åˆ†æ­§ï¼Œç»„ç»‡è¾©è®º
âœ… **è®¨è®ºæ€»ç»“** - ç»¼åˆå¤šæ–¹è§‚ç‚¹å½¢æˆç»“æ„åŒ–ç»“è®º
âœ… **è¿‡ç¨‹å¯è¿½æº¯** - ä¿å­˜å®Œæ•´è®¨è®ºå†å²ï¼Œæ”¯æŒéšæ—¶æŸ¥çœ‹

## ä½¿ç”¨åœºæ™¯

### 1. éœ€æ±‚è¯„ä¼°
å½“ç”¨æˆ·æå‡ºæ–°éœ€æ±‚æ—¶ï¼Œè‡ªåŠ¨ç»„ç»‡å¸‚åœºã€éœ€æ±‚ã€æŠ€æœ¯ã€æµ‹è¯•ç­‰ Agent è¿›è¡Œè¯„ä¼°ï¼š

```
ç”¨æˆ·ï¼šæˆ‘æƒ³å¼€å‘ä¸€ä¸ª"è‡ªåŠ¨å†™ä»£ç "çš„æŠ€èƒ½
â†“
ä¸» Agent è¯†åˆ«åˆ°éœ€æ±‚è¯„ä¼°åœºæ™¯
â†“
å¯åŠ¨å¤š Agent è®¨è®º
â†“
å¸‚åœºï¼šè¯„ä¼°å•†ä¸šä»·å€¼
éœ€æ±‚ï¼šæ¢³ç†åŠŸèƒ½è¾¹ç•Œ
æŠ€æœ¯ï¼šè¯„ä¼°å®ç°éš¾åº¦
æµ‹è¯•ï¼šè§„åˆ’è´¨é‡ä¿éšœ
â†“
ç»¼åˆå„æ–¹æ„è§ï¼Œç»™ç”¨æˆ·å›å¤
```

### 2. æ–¹æ¡ˆè¯„å®¡
å½“éœ€è¦è¯„å®¡æŠ€æœ¯æ–¹æ¡ˆæ—¶ï¼Œç»„ç»‡ç›¸å…³ Agent è®¨è®ºï¼š

```
ä¸» Agentï¼šè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆå¤§å®¶è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ
â†“
æŠ€æœ¯ Agentï¼šåˆ†æä¼˜ç¼ºç‚¹
æµ‹è¯• Agentï¼šè¯„ä¼°æµ‹è¯•éš¾åº¦
å¸‚åœº Agentï¼šè€ƒè™‘äº¤ä»˜æ—¶é—´
â†“
è¾¾æˆå…±è¯†æˆ–è¯†åˆ«åˆ†æ­§ç‚¹
```

### 3. é—®é¢˜è§£å†³
é‡åˆ°å¤æ‚é—®é¢˜æ—¶ï¼Œè®©ä¸åŒè§†è§’çš„ Agent å…±åŒåˆ†æï¼š

```
ä¸» Agentï¼šç”¨æˆ·åé¦ˆä»£ç è´¨é‡ä¸ç¨³å®šï¼Œæ€ä¹ˆåŠï¼Ÿ
â†“
æŠ€æœ¯ Agentï¼šåˆ†æå¯èƒ½åŸå› 
æµ‹è¯• Agentï¼šè¯„ä¼°å½±å“èŒƒå›´
éœ€æ±‚ Agentï¼šè€ƒè™‘ç”¨æˆ·æœŸæœ›
â†“
å½¢æˆç»¼åˆè§£å†³æ–¹æ¡ˆ
```

## å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

```javascript
const { DiscussionOrchestrator } = require('./orchestrator.js');

// 1. åˆ›å»ºåè°ƒå™¨
const orchestrator = new DiscussionOrchestrator({
  maxDuration: 300000,  // 5åˆ†é’Ÿ
  maxRounds: 10,
  enableConflictDetection: true,
  enableDynamicSpeaking: true
});

// 2. åˆå§‹åŒ–
await orchestrator.initialize();

// 3. åˆ›å»ºè®¨è®º
const { discussionId, context } = await orchestrator.createDiscussion(
  'è¯„ä¼°å¼€å‘"è‡ªåŠ¨å†™ä»£ç "æŠ€èƒ½çš„å¯è¡Œæ€§',
  {
    participants: ['market_research', 'requirement', 'technical', 'testing']
  }
);

// 4. Agent å‘è¨€
await orchestrator.agentSpeak(discussionId, 'market_research', `
## ğŸ“Š å•†ä¸šä»·å€¼è¯„ä¼°

è¿™ä¸ªæ–¹å‘æœ‰ä»·å€¼ï¼Œä½†éœ€è¦å·®å¼‚åŒ–ï¼š
- ç«å“ï¼šGitHub Copilot å·²æˆç†Ÿ
- æœºä¼šï¼šèšç„¦ä¸­æ–‡å¼€å‘è€…
- å»ºè®®ï¼šå€¼å¾—åšï¼Œä½†ä¸èƒ½æ˜¯"å¦ä¸€ä¸ª Copilot"
`);

// 5. è·å–è®¨è®ºå†å²
const history = orchestrator.getDiscussionHistory(discussionId);

// 6. ç»“æŸè®¨è®º
const summary = await orchestrator.endDiscussion(discussionId);
```

### åœ¨ OpenClaw ä¸­ä½¿ç”¨

è¿™ä¸ª Skill å¯ä»¥è¢«å…¶ä»– Agent è°ƒç”¨ï¼š

```markdown
<!-- Agent System Prompt -->
å½“ç”¨æˆ·æå‡ºå¤æ‚éœ€æ±‚æ—¶ï¼Œä½¿ç”¨ multi-agent-discuss skill ç»„ç»‡è®¨è®ºï¼š

1. è¯†åˆ«è®¨è®ºä¸»é¢˜
2. é€‰æ‹©å‚ä¸è§’è‰²
3. åˆ›å»ºè™šæ‹Ÿè®¨è®ºç»„
4. å¼•å¯¼å„ Agent å‘è¨€
5. æ€»ç»“è®¨è®ºç»“æœ
6. å›å¤ç”¨æˆ·
```

## å¯ç”¨è§’è‰²

| è§’è‰² | ID | æ“…é•¿é¢†åŸŸ | Emoji |
|------|-----|----------|-------|
| ä¸»åè°ƒå‘˜ | coordinator | å¼•å¯¼è®¨è®ºã€æ€»ç»“å…±è¯† | ğŸ’¡ |
| å¸‚åœºè°ƒç ” | market_research | å•†ä¸šä»·å€¼ã€å¸‚åœºéœ€æ±‚ | ğŸ“Š |
| éœ€æ±‚åˆ†æ | requirement | ç”¨æˆ·éœ€æ±‚ã€åŠŸèƒ½è¾¹ç•Œ | ğŸ¯ |
| æŠ€æœ¯å¯è¡Œæ€§ | technical | æŠ€æœ¯æ–¹æ¡ˆã€å®ç°éš¾åº¦ | ğŸ”§ |
| æµ‹è¯• | testing | è´¨é‡ä¿éšœã€æµ‹è¯•ç­–ç•¥ | ğŸ§ª |
| æ–‡æ¡£ | documentation | è®°å½•è®¨è®ºã€æ•´ç†è¾“å‡º | ğŸ“ |

## é…ç½®é€‰é¡¹

```javascript
const config = {
  // è®¨è®ºæœ€å¤§æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
  maxDuration: 300000,
  
  // æœ€å¤§è®¨è®ºè½®æ¬¡
  maxRounds: 10,
  
  // æœ€å°‘å‚ä¸è€…æ•°é‡
  minParticipants: 2,
  
  // å¯ç”¨å†²çªæ£€æµ‹
  enableConflictDetection: true,
  
  // å¯ç”¨åŠ¨æ€å‘è¨€
  enableDynamicSpeaking: true
};
```

## è®¨è®ºè¾“å‡ºæ ¼å¼

### è®¨è®ºæ‘˜è¦
```json
{
  "id": "disc-1234567890",
  "topic": "è¯„ä¼°XXåŠŸèƒ½",
  "status": "ended",
  "participants": ["market_research", "technical"],
  "messageCount": 15,
  "rounds": 5,
  "duration": 180000
}
```

### è®¨è®ºå†å²
```json
{
  "discussion": { "id": "...", "topic": "..." },
  "participants": [...],
  "messages": [
    {
      "id": "msg-1",
      "role": "market_research",
      "content": "## ğŸ“Š å•†ä¸šè¯„ä¼°...",
      "timestamp": 1234567890,
      "round": 1
    }
  ],
  "conflicts": [],
  "summary": {
    "keyPoints": [...],
    "decisions": [...],
    "openQuestions": [...]
  }
}
```

## é«˜çº§ç‰¹æ€§

### åŠ¨æ€å‘è¨€
Agent ä¼šæ ¹æ®ä¸Šä¸‹æ–‡æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦å‘è¨€ï¼š
- è¢«å…¶ä»– Agent @ æ—¶ï¼Œå¿…é¡»å›åº”
- æ£€æµ‹åˆ°å…³é”®è¯æ—¶ï¼Œä¸»åŠ¨å‘è¨€
- åŸºäºå‘è¨€æ¦‚ç‡éšæœºå†³å®š

### å†²çªæ£€æµ‹
è‡ªåŠ¨è¯†åˆ«æ„è§åˆ†æ­§ï¼š
- å¯¹ç«‹è§‚ç‚¹æ£€æµ‹ï¼ˆ"å¯è¡Œ" vs "ä¸å¯è¡Œ"ï¼‰
- è¯†åˆ«å†²çªåŒæ–¹
- æ”¯æŒç»„ç»‡å°èŒƒå›´è¾©è®º

### è®¨è®ºæ€»ç»“
è‡ªåŠ¨æå–å…³é”®ä¿¡æ¯ï¼š
- å…³é”®è§‚ç‚¹
- è¾¾æˆçš„å†³ç­–
- æœªè§£å†³çš„é—®é¢˜
- ä¸‹ä¸€æ­¥è¡ŒåŠ¨

## æ•°æ®å­˜å‚¨

è®¨è®ºæ•°æ®ä¿å­˜åœ¨ `~/.openclaw/multi-agent-discuss/`ï¼š

```
multi-agent-discuss/
â”œâ”€â”€ discussions/        # è®¨è®ºè®°å½•ï¼ˆJSONï¼‰
â”‚   â”œâ”€â”€ disc-123.json
â”‚   â””â”€â”€ disc-456.json
â””â”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶
```

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°è§’è‰²

1. åœ¨ `agents/prompts/` åˆ›å»ºæ–°çš„ prompt æ–‡ä»¶
2. åœ¨ `orchestrator.js` çš„ `AGENT_ROLES` ä¸­æ³¨å†Œï¼š

```javascript
const AGENT_ROLES = {
  // ... ç°æœ‰è§’è‰²
  
  security: {
    id: 'security',
    role: 'å®‰å…¨ä¸“å®¶',
    emoji: 'ğŸ”’',
    agentId: 'main',
    systemPrompt: 'ä½ æ˜¯å®‰å…¨ä¸“å®¶...',
    triggerKeywords: ['å®‰å…¨', 'æ¼æ´', 'æƒé™'],
    speakProbability: 0.5
  }
};
```

### è‡ªå®šä¹‰å†²çªæ£€æµ‹

ç»§æ‰¿ `DiscussionOrchestrator` å¹¶é‡å†™ `detectConflicts` æ–¹æ³•ï¼š

```javascript
class CustomOrchestrator extends DiscussionOrchestrator {
  async detectConflicts(context) {
    // è‡ªå®šä¹‰å†²çªæ£€æµ‹é€»è¾‘
    const conflicts = await super.detectConflicts(context);
    
    // æ·»åŠ è‡ªå®šä¹‰æ£€æµ‹
    // ...
    
    return conflicts;
  }
}
```

## æ€§èƒ½è€ƒè™‘

- è®¨è®ºæ•°æ®å®šæœŸæ¸…ç†ï¼ˆé»˜è®¤ 24 å°æ—¶ï¼‰
- æ”¯æŒæ‰‹åŠ¨æ¸…ç†è¿‡æœŸè®¨è®º
- æ¶ˆæ¯å†å²é™åˆ¶åœ¨å†…å­˜ä¸­

## æ•…éšœæ’æŸ¥

### è®¨è®ºæœªæ­£å¸¸ç»“æŸ
- æ£€æŸ¥ `maxDuration` å’Œ `maxRounds` é…ç½®
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦æƒ…

### Agent æœªå“åº”
- ç¡®è®¤ Agent é…ç½®æ­£ç¡®
- æ£€æŸ¥è§¦å‘å…³é”®è¯æ˜¯å¦åŒ¹é…

### å†²çªæ£€æµ‹ä¸å‡†ç¡®
- è°ƒæ•´ `confidenceThreshold`
- æ‰©å±•å¯¹ç«‹æ¨¡å¼åˆ—è¡¨

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT
