# MAD v2.6.2 Release Notes

**发布日期：** 2026-02-02  
**版本类型：** 补丁版本（Bug 修复 + 文档优化）

---

## 🎉 版本亮点

v2.6.2 是一个重要的优化版本，专注于**移动端体验**和**代码库质量**提升。本版本修复了移动端侧边栏无法显示的关键问题，并完成了代码库结构的全面重构，使项目更加规范和易于维护。

---

## 📱 移动端优化

### ✅ 修复移动端侧边栏显示问题
- **问题：** 移动端用户无法看到对话记录，侧边栏被隐藏
- **解决：** 添加汉堡菜单按钮（☰），实现侧边栏切换功能
- **功能：**
  - 📱 移动端侧边栏默认隐藏，点击菜单按钮滑出
  - 🎨 遮罩层支持，点击空白处关闭侧边栏
  - ⚡ 选择讨论后自动关闭侧边栏，优化用户体验
  - 📐 完善的移动端响应式布局

### ✅ 修复页面刷新抖动问题
- **问题：** 页面自动刷新时，消息列表抖动，影响阅读
- **解决：** 实现智能滚动机制
- **功能：**
  - 🎯 只在用户位于底部时自动滚动
  - 📨 用户在中间浏览时显示"有新消息"横幅
  - ⬇️ 提供"滚动到底部"按钮，用户自主控制

---

## 📖 文档完善

### ✅ 新增英文文档
- 创建完整的 `README_EN.md`
- 与中文版内容完全同步
- 包含所有功能说明和使用示例

### ✅ 语言切换入口
- 在 README 顶部添加语言切换徽章
- 🇨🇳 中文 | 🇬🇧 English
- 支持双向跳转

### ✅ 版本历史优化
- 清理重复的版本记录
- 删除虚构的 v2.7.0 版本
- 添加完整的 v2.6.1 和 v2.6.2 版本记录
- 版本历史准确到最新

---

## 🔧 代码库重构

### ✅ 重新组织文件结构
- **问题：** 代码库文件混乱，11 个功能 .js 文件散落在根目录
- **解决：** 按功能分层，创建清晰的目录结构

**新目录结构：**
```
src/
├── core/      # 核心功能（8 个文件）
├── features/  # 特性模块（11 个目录）
└── tools/     # 工具和辅助（3 个文件）
```

**文件移动统计：**
- ✅ 移动 71 个文件到新位置
- ✅ 归档 20 个旧文档到 `docs/archive/`
- ✅ 根目录文件减少 52%

**技术改进：**
- 更新所有 require/import 路径
- 优化 .gitignore，忽略运行时数据
- 保留完整的 Git 历史记录

---

## 🐛 Bug 修复

### 移动端修复
- ✅ 修复侧边栏 CSS 隐藏问题（`transform: translateX(-100%)`）
- ✅ 添加移动端菜单按钮和事件监听
- ✅ 实现侧边栏切换函数（`toggleSidebar`, `closeSidebar`）
- ✅ 添加遮罩层支持（`createSidebarOverlay`）

### UI/UX 修复
- ✅ 修复页面刷新导致的抖动（智能滚动）
- ✅ 优化移动端响应式布局（断点：768px）
- ✅ 调整头部布局，支持移动端显示

### 文档修复
- ✅ 清理版本历史中的重复内容
- ✅ 删除不存在的 v2.7.0 版本记录
- ✅ 补充 v2.6.1 和 v2.6.2 版本说明

---

## 📦 文件变更

### 新增文件（3 个）
- `README_EN.md` - 英文版 README（611 行）
- `REFACTOR_PLAN.md` - 代码重构计划文档
- 移动端样式和脚本更新

### 修改文件（3 个）
- `README.md` - 添加语言切换、更新版本历史
- `web/public/index.html` - 添加移动端菜单按钮
- `web/public/style.css` - 移动端响应式样式
- `web/public/app.js` - 移动端侧边栏切换逻辑
- `.gitignore` - 优化数据文件忽略规则

### 移动/重命名（71 个）
- 核心功能 → `src/core/`
- 特性模块 → `src/features/`
- 工具文件 → `src/tools/`
- 数据文件 → `data/`
- 旧文档 → `docs/archive/`

---

## 🚀 新功能

### 移动端菜单系统
- 汉堡菜单按钮（☰）
- 侧边栏滑动动画
- 遮罩层支持
- 自动关闭逻辑

### 双语文档支持
- 完整的英文版 README
- 语言切换入口
- 内容完全同步

### 代码库结构
- 清晰的功能分层
- 文件分类明确
- 易于维护和扩展

---

## 📊 版本对比

| 项目 | v2.6.1 | v2.6.2 |
|------|--------|--------|
| 移动端侧边栏 | ❌ 无法显示 | ✅ 完美支持 |
| 页面刷新抖动 | ⚠️ 存在抖动 | ✅ 智能滚动 |
| 英文文档 | ❌ 无 | ✅ 完整支持 |
| 代码库结构 | ⚠️ 文件散乱 | ✅ 清晰分层 |
| 根目录文件 | 27 个 | 13 个 (-52%) |

---

## 🔐 安全性

- ✅ 无安全漏洞修复
- ✅ 无依赖更新
- ✅ 代码质量提升

---

## 📝 升级指南

### 从 v2.6.1 升级到 v2.6.2

**自动升级（推荐）：**
```bash
cd ~/.openclaw/skills/multi-agent-discuss
git pull origin main
npm install
```

**手动升级：**
```bash
git fetch origin
git checkout v2.6.2
npm install
```

**注意事项：**
- ⚠️ 代码库结构已重构，旧路径不再有效
- ⚠️ 如果有自定义扩展，需要更新 require 路径
- ✅ 配置文件格式无变化，无需修改
- ✅ 数据文件格式无变化，向后兼容

---

## 🐛 已知问题

- 无

---

## 🙏 致谢

感谢所有贡献者和用户的反馈！

特别感谢：
- 移动端问题的反馈者
- 文档翻译的贡献者
- 代码重构的建议者

---

## 📅 下一步计划

### v2.7.0（规划中）
- 讨论质量评分系统优化
- Agent 性能分析增强
- 更多导出格式支持
- 实时协作功能改进

---

## 📞 获取帮助

- **文档：** [README.md](https://github.com/OTTTTTO/MAD/blob/main/README.md)
- **英文文档：** [README_EN.md](https://github.com/OTTTTTO/MAD/blob/main/README_EN.md)
- **问题反馈：** [GitHub Issues](https://github.com/OTTTTTO/MAD/issues)
- **讨论区：** [GitHub Discussions](https://github.com/OTTTTTO/MAD/discussions)

---

## 📄 许可证

MIT License - 详见 [LICENSE](https://github.com/OTTTTTO/MAD/blob/main/LICENSE) 文件

---

**🎉 感谢使用 MAD (Multi-Agent Discussion)！**

*让 Agent 们协同工作，产生更好的答案！* 🚀
